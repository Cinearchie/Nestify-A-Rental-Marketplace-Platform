<%layout("/layouts/boilerplate.ejs")%>
</div>
<body>
  <div class="listings-header">
    <h1>All listings</h1>
    <div class="tax_toggle">
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
            <label class="form-check-label" for="flexSwitchCheckDefault">Include Taxes</label>
        </div>
    </div>
</div>

        <div class="container my-4">
          <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-3 g-4">

              <% for (al of allListing) { %>
                  <div class="col">
                      <a href="/listings/<%=al._id%>" class="listing-link">
                          <div class="card listing-card">
                              <img src="<%=al.image.url%>" class="card-img-top" alt="listing_image" style="height: 20rem;">
                              <div class="card-body">
                                  <p class="card-text">
                                      <b><%=al.title%></b> <br>
                                      &#8377;<%=al.price.toLocaleString("en-IN")%> / Night
                                      <i class="tax_info">&nbsp; &nbsp; + 18% GST</i>
                                  </p>
                              </div>
                          </div>
                      </a>
                  </div>
              <% } %>
          </div>
      </div>
</body>

<script>
  let taxInlude = document.getElementById("flexSwitchCheckDefault")
  taxInlude.addEventListener("click" , () => {
    let taxInfo = document.getElementsByClassName('tax_info');
    for(info of taxInfo){
      if(info.style.display != "inline"){
      info.style.display = "inline"
    }else{
      info.style.display = "none"
    }
  }
  })
</script>
